<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untuk Pacarku ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(to bottom, #1a1a2e, #16213e);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Nunito', sans-serif;
            color: white;
            overflow: hidden;
            position: relative;
        }

        /* --- Background Animasi Bubbles --- */
        .bubbles {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
            pointer-events: none;
        }
        .bubble {
            position: absolute;
            bottom: -100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            opacity: 0.5;
            animation: rise 10s infinite ease-in;
        }
        .bubble:nth-child(1) { left: 10%; width: 80px; height: 80px; animation-duration: 8s; }
        .bubble:nth-child(2) { left: 20%; width: 20px; height: 20px; animation-duration: 5s; animation-delay: 1s; }
        .bubble:nth-child(3) { left: 35%; width: 50px; height: 50px; animation-duration: 7s; animation-delay: 2s; }
        .bubble:nth-child(4) { left: 50%; width: 60px; height: 60px; animation-duration: 11s; }
        .bubble:nth-child(5) { left: 65%; width: 30px; height: 30px; animation-duration: 6s; animation-delay: 1s; }
        .bubble:nth-child(6) { left: 80%; width: 70px; height: 70px; animation-duration: 9s; animation-delay: 3s; }

        @keyframes rise {
            0% { bottom: -100px; transform: translateX(0); }
            50% { transform: translateX(50px); }
            100% { bottom: 120%; transform: translateX(-50px); }
        }

        /* --- Amplop Awal --- */
        .envelope-container {
            position: absolute;
            z-index: 20;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: bounce 2s infinite;
        }
        .envelope-wrapper {
            background: #ff7eb3;
            width: 120px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255, 126, 179, 0.6);
        }
        .envelope-wrapper span { font-size: 40px; }
        .envelope-text { margin-top: 15px; font-weight: bold; font-size: 1.1rem; }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* --- Container Utama (Kotak Pesan) --- */
        .card {
            display: none;
            position: relative;
            z-index: 10;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            width: 90%;
            max-width: 380px;
            height: auto;
            min-height: 100px; 
            max-height: 85vh;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 25px 20px;
            flex-direction: column;
            align-items: center;
            transition: all 0.5s ease;
            overflow-y: auto;
        }

        /* Video Panda */
        .panda-video-container {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid white;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
            flex-shrink: 0;
            display: none; 
        }
        .panda-video { width: 100%; height: 100%; object-fit: cover; }

        /* Area Teks */
        .text-area {
            width: 100%;
            text-align: left; /* Default rata kiri */
            font-size: 1rem;
            line-height: 1.6;
            min-height: 20px;
            white-space: pre-wrap; /* Agar enter di JS terbaca */
        }

        /* Class khusus untuk rata tengah (dipakai di slide terakhir) */
        .text-center {
            text-align: center !important;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* Cursor Mengetik */
        .cursor {
            display: inline-block;
            width: 2px;
            height: 1rem;
            background-color: white;
            animation: blink 0.8s infinite;
            vertical-align: middle;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* Footer Hati */
        .footer-heart {
            margin-top: 20px;
            font-family: 'Pacifico', cursive;
            font-size: 1.4rem;
            color: #ff99cc;
        }

        /* Tombol (Next & Share) */
        .btn {
            display: none;
            margin-top: 25px;
            padding: 10px 25px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(255, 126, 179, 0.4);
            transition: transform 0.2s;
        }
        .btn:active { transform: scale(0.95); }

        .next-btn {
            background: #ff7eb3;
            color: white;
            animation: pulse 1.5s infinite;
            align-self: flex-end; /* Kanan */
        }

        /* Tombol Share - Tampil Beda */
        .share-btn {
            background: linear-gradient(45deg, #25D366, #128C7E); /* Warna ala WA/Hijau Cerah */
            color: white;
            width: 100%; /* Full width biar jelas */
            animation: pulse-green 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(37, 211, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }

        .show-flex { display: flex !important; }
        .hidden { display: none !important; }

    </style>
</head>
<body>

    <div class="bubbles">
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
    </div>

    <div class="envelope-container" id="envelope" onclick="startJourney()">
        <div class="envelope-wrapper">
            <span>üíå</span>
        </div>
        <div class="envelope-text">Buka Pesan Ini yaa...</div>
    </div>

    <div class="card" id="card">
        <div class="panda-video-container" id="panda">
            <video class="panda-video" autoplay loop muted playsinline>
                <source src="https://uploader.zenzxz.dpdns.org/uploads/1766477931960.mp4" type="video/mp4">
            </video>
        </div>

        <div class="text-area" id="typing-text"></div>

        <button class="btn next-btn" id="nextBtn" onclick="nextSlide()">Lanjutkan ‚û°</button>
        
        <button class="btn share-btn" id="shareBtn" onclick="shareLink()">Bagikan üîó</button>
    </div>

    <audio id="bg-music" loop>
        <source src="https://uploader.zenzxz.dpdns.org/uploads/1766477001718.mpga" type="audio/mpeg">
    </audio>

    <script>
        // --- DATA PESAN ---
        // Slide terakhir tidak perlu tag HTML untuk center, sudah otomatis dihandle JS
        const slides = [
            "Aku mau ngucapin terimakasih atas semua perhatian, waktu, dan rasa sayang kamu. Kamu udah sabar banget ngadepin aku. Aku mau minta maaf kalo aku masih sering banyak salah. Maafin aku yaaa ü•∫",
            
            "Kamu sosok paling sempurna buat aku. Jangan pernah mikir aneh-aneh ya, aku ga bakal ninggalin kamu. Aku sayang banget sama kamu! ü§ó",
            
            "Terakhir, Aku cuma mau kasih tau kalau kamu itu...",
            
            // Slide Terakhir: Gunakan \n untuk baris baru agar rapi saat diketik
            "Kamu penting,\nKamu terbaik,\nKamu cintaku,\nKamu sayangku,\nKamu milikku,\nKamu duniaku,\nKamu segalanya buat akuu ü´∂\n\nI lovee youuu Sayaangg üíêüíó"
        ];

        let currentSlideIndex = 0;
        const typingSpeed = 50; 
        
        const envelope = document.getElementById('envelope');
        const card = document.getElementById('card');
        const panda = document.getElementById('panda');
        const textBox = document.getElementById('typing-text');
        const nextBtn = document.getElementById('nextBtn');
        const shareBtn = document.getElementById('shareBtn');
        const music = document.getElementById('bg-music');

        function startJourney() {
            envelope.classList.add('hidden');
            card.classList.add('show-flex');
            panda.style.display = "block";
            music.volume = 0.7;
            music.play().catch(e => console.log("Audio play failed"));
            
            checkSlideAlignment();
            typeWriter(slides[currentSlideIndex]);
        }

        function nextSlide() {
            currentSlideIndex++;
            if (currentSlideIndex < slides.length) {
                nextBtn.style.display = "none";
                textBox.innerHTML = ""; 
                checkSlideAlignment(); // Cek apakah ini slide terakhir untuk atur posisi
                typeWriter(slides[currentSlideIndex]);
            }
        }

        // Fungsi khusus mengatur posisi teks (Kiri / Tengah)
        function checkSlideAlignment() {
            if (currentSlideIndex === slides.length - 1) {
                // Jika slide terakhir, tambahkan class text-center
                textBox.classList.add('text-center');
                textBox.classList.remove('text-area'); // Optional: remove default padding logic if needed
                textBox.classList.add('text-area'); // Keep basic styles
            } else {
                // Jika bukan slide terakhir, pastikan rata kiri
                textBox.classList.remove('text-center');
            }
        }

        function typeWriter(text) {
            let i = 0;
            textBox.innerHTML = "<span class='cursor'></span>";
            
            function typing() {
                if (i < text.length) {
                    let char = text.charAt(i);
                    // Handle new line character (\n)
                    if (char === '\n') {
                        char = '<br>';
                    }
                    
                    let currentHTML = textBox.innerHTML;
                    textBox.innerHTML = currentHTML.replace("<span class=\"cursor\"></span>", "") + char + "<span class='cursor'></span>";
                    i++;
                    
                    card.scrollTop = card.scrollHeight;
                    setTimeout(typing, typingSpeed);
                } else {
                    // Selesai mengetik
                    if (currentSlideIndex === slides.length - 1) {
                         document.querySelector('.cursor').style.display = 'none'; 
                         shareBtn.style.display = "block"; // Tampilkan tombol Share di akhir
                    } else {
                        nextBtn.style.display = "block"; 
                    }
                }
            }
            typing();
        }

        // --- FUNGSI BAGIKAN (NATIVE SHARE) ---
        async function shareLink() {
            // Data yang akan dibagikan
            const shareData = {
                title: 'Pesan Spesial ‚ù§Ô∏è',
                text: 'Ada pesan buat kamu nih, buka sekarang yaa! üíå\n',
                url: window.location.href // Mengambil link halaman ini otomatis
            };

            try {
                // Cek apakah browser mendukung fitur share native (HP biasanya support)
                if (navigator.share) {
                    await navigator.share(shareData);
                } else {
                    // Fallback untuk browser PC/Laptop yang tidak support
                    alert("Link telah disalin! Kirim ke pacarmu ya manual.");
                    navigator.clipboard.writeText(window.location.href);
                }
            } catch (err) {
                console.log('Error sharing:', err);
            }
        }

    </script>
</body>
</html>
